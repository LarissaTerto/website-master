<despesa-view>
    <div class="row relative">
        <a class="back-to-year"
        href="#"
        onclick={fRoute('ano')}>
            <span class="left-arrow"/>
            voltar para o ano
        </a>

        <div class="col-md-offset-5 col-md-7 col-lg-8 col-lg-offset-4 main-data">
            <h2>Despesa: { this.pointinfo.ds_projeto_atividade }</h2>

            <div each="{ cat, i in categories }" class="col-md-4 category">
                <div class="title">{ cat }</div>
                <img src="assets/img/{cat}.png"/>
                <div class="value">R$ { formatCur(this[cat]) }</div>
            </div>
        </div>
    </div>

    <div class="row text-right">
        <p>dados atualizados em: ???</p>
    </div>

    <div class="top-bar orgao-box">
        <span class="block-decorator"/>
        <span class="key">Orgão responsável:</span>
        <span class="value">{this.orgao}</span>
    </div>

    <ul class="top-bar bottom-bar despesa-details-list">
        <li each={key, i in keys}>
            <span class="key">{key}:</span>
            <span>{this.pointinfo[key]}</span>
        </li>
    </ul>

    <perg-com-tabs/>


    <script type="es6">
    import {formatCur} from '../utils/helpers'
    this.formatCur = formatCur
    this.mixin('base')
    // this.code = opts.code
    this.code = this.router.getParam('code')

    this.categories = ['planejado', 'empenhado', 'liquidado']

    this.watchDepends('pointinfo', 'code', () => {
        this.keys = Object.keys(this.pointinfo)
        this.planejado = this.pointinfo.sld_orcado_ano
        if (this.pointinfo.vl_atualizado)
            this.planejado = this.pointinfo.vl_atualizado
        this.empenhado = this.pointinfo.vl_empenhadoliquido
        this.liquidado = this.pointinfo.vl_liquidado
        this.orgao = this.pointinfo.ds_orgao
        this.update()
    })
    </script>
</despesa-view>
