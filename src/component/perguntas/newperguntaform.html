<new-pergunta-form>
    <div class="modal-body">
        <h2>O que deseja perguntar?</h2>

        <p>Lembre-se que...
            <a>veja as dicas para elaborar uma pergunta.</a>
        </p>

        <!--
        <styled-select class="separated-caret text-left"
                       options="{ mainDests }"
                       current="{ mainDest }"
                       onchange={ mainDestSelected }
                       outclicklimit="{ parent.root }"/>
        -->

        <styled-select class="separated-caret text-left"
                       options="{ orgaos.value }"
                       current="{ orgao }"
                       onchange={ secondDestSelected }
                       outclicklimit="{ parent.root }"/>

        <p>Pergunta referente Ã  despesa ...</p>

        <form class="form">
            <div class="form-group">
                <label class="sr-only" for="new-pergunta-textarea">
                    Pergunta
                </label>
                <textarea id="new-pergunta-textarea"
                            class="form-control"
                            rows="5">
                </textarea>
            </div>
            <button type="submit"
                    onclick="{ sendPedido }"
                    class="btn btn-color-sec float-right">
                { t("Send") }
            </button>
        </form>

        <p>Li e concordo com os <a href="#">termos de uso</a>.</p>

    </div>

    <script type="es6">
    this.mixin('base')
    this.watch('orgaos', () => {
        if(this.orgaos) this.orgao = this.orgaos.value[0].key
    })

    // this.mainDests = [
    //     {key: 'camara', value: 'camara'},
    //     {key: 'prefeitura', value: 'prefeitura'}
    // ]
    // this.mainDest = 'prefeitura'
    // this.mainDestSelected = (option) => {
    //     this.mainDest = option
    //     this.update()
    // }

    //this.secondDests = [
    //    {key: 'camara', value: 'camara'},
    //    {key: 'prefeitura', value: 'prefeitura'}
    //]
    //this.secondDest = 'prefeitura'
    this.secondDestSelected = (option) => {
        console.log(option)
        this.orgao = option
        this.update()
    }

    this.sendPedido = () => {
        console.log('THIS', this)
        this.triggerChange('sendPedido', {
            text: this['new-pergunta-textarea'].value,
            orgao: this.tags['styled-select'].getCurrent(),
            keywords: [this.parent.parent.code]
        })
    }

    </script>
</new-pergunta-form>
