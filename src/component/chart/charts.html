<charts>
    <p>Mapeadas: {yearinfo.rows.mapped}</p>
    <p>NÃ£o mapeadas: {yearinfo.rows.total - yearinfo.rows.mapped}</p>
    <bar color={colorNM} percentage={perNotMapped}/>
    <bar color={colorM} percentage={perMapped}/>
    <donut color={colorNM} percentage={perNotMapped}/>
    <donut color={colorM} percentage={perMapped}/>


    <script type="es6">
    this.mixin('base')

    this.year = opts.year
    this.yearinfo = ''
    this.colorM = "00F"
    this.colorNM = "Fa0"

    this.perNotMapped = 0
    this.perMapped = 0


    this.watchDepends('yearinfo', 'year', () => {
        this.yearinfo.rows["mapped-per"] = Math.round(this.yearinfo.rows.mapped / this.yearinfo.rows.total * 100)
        this.perNotMapped = 100 - this.yearinfo.rows["mapped-per"]
        this.perMapped = this.yearinfo.rows["mapped-per"]
        // Values table
        this.yearinfo.values.forEach((index, valueElement) => {
            valueElement.unmapped = valueElement.total - valueElement.mapped
            valueElement.percentage = Math.round(valueElement.mapped / valueElement.total * 100)
        })

        this.update()
    })
    </script>
</charts>
