<login-form>
    <!-- Modal -->
    <div if={ loginFormIsOpen }>
        <div class="modal-backdrop"></div>
        <div class="modal"
             tabindex="-1"
             role="dialog"
             aria-labelledby="myModalLabel"
             style="display:block;">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button"
                                class="btn btn-color-sec close"
                                onclick={ closeLoginForm }
                                aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title">Cuidando</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form">

                            <div class="form-group">
                                <label class="sr-only"
                                       for="login-form-username">
                                    Username
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="login-form-username"
                                       placeholder="Username">
                            </div>

                            <div class="form-group"
                                 if={ isRegisterForm }>
                                <label class="sr-only"
                                       for="login-form-email">
                                    E-mail
                                </label>
                                <input type="text"
                                       class="form-control"
                                       id="login-form-email"
                                       placeholder="E-mail">
                            </div>

                            <div class="form-group">
                                <label class="sr-only"
                                       for="login-form-password">
                                    Password
                                </label>
                                <input type="password"
                                       class="form-control"
                                       id="login-form-password"
                                       placeholder="Password">
                            </div>

                            <div class="form-group"
                                 if={ isRegisterForm }>
                                <label class="sr-only"
                                       for="login-form-confirm-password">
                                    { t("Confirm Password") }
                                </label>
                                <input type="password"
                                       class="form-control"
                                       id="login-form-confirm-password"
                                       placeholder="{ t('Confirm Password') }">
                            </div>

                            <button type="submit"
                                    class="btn btn-color-sec modal-button"
                                    onclick={ sendLogin }
                                    if={ !isRegisterForm }>
                                { t("Login") }
                            </button>

                            <button type="submit"
                                    class="btn btn-color-sec modal-button"
                                    onclick={ sendRegister }
                                    if={ isRegisterForm }>
                                { t("Register") }
                            </button>
                        </form>

                        <a class="text-center center-block modal-anchor"
                                onclick={ prepareRegister }
                                if={ !isRegisterForm }>
                            { t("Register") }
                        </a>
                        <div class="relative separator-block">
                            <span class="bar-decorator"/>
                            <div class="center-block separator">
                                <span>ou</span>
                            </div>
                        </div>
                        <button id="login-facebook"
                                onclick={ startFacebookLogin }
                                class="btn modal-button login-facebook">
                            Login Facebook
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script type="es6">
    this.mixin('base')

    isRegisterForm = false
    loginFormIsOpen = true

    this.prepareRegister = () => {isRegisterForm = true}

    this.openLoginForm = () => {
        loginFormIsOpen = true
    }
    this.closeLoginForm = () => {
        loginFormIsOpen = false
        isRegisterForm = false
    }

    sendLogin = () => {
        this.triggerChange('login', {
            username: this['login-form-username'].value,
            password: this['login-form-password'].value,
        })
    }

    sendRegister = () => {
        if(this['login-form-password'].value !=
            this['login-form-confirm-password'].value) {
            alert("Senhas nÃ£o batem!")
        } else {
            this.triggerChange('register', {
                username: this['login-form-username'].value,
                password: this['login-form-password'].value,
                email: this['login-form-email'].value,
            })
        }
    }

    startFacebookLogin = () => this.triggerChange('loginFacebook')

    this.onControl(riot.SEC('username'), data => {
        this.closeLoginForm()
        this.update()
    })
    </script>
</login-form>
